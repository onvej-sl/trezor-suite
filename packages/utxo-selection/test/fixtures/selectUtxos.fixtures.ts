import { Value } from '../../src/Value';

export const fixtures = [
    {
        comment: 'impossible to select utxos (targetValue too high)',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 4_000_000 - 172 - 42,
        changeWeight: 172,
        minimumAnonymityInclusive: 1,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(100_000),
                weight: 230,
                txid: 'a17a4ba2aca961c62ccea08445d48369f3de62e033a538d4b5253dae1b2d9e6c',
                anonymity: 1.0,
                confirmed: true,
                registered: false,
            },
        ],
        expectedSelectedIndices: null,
    },
    {
        comment:
            'impossible to select utxos (minimumChangeInclusive too high and maximumDustInclusive too low)',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 4_000_000 - 172 - 42,
        changeWeight: 172,
        minimumAnonymityInclusive: 1,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(1_002_000),
                weight: 230,
                txid: '3e8d0a858710ecce797a544fe29d9cd2af19843601d2484e18e76d64919f7e08',
                anonymity: 1.0,
                confirmed: true,
                registered: false,
            },
        ],
        expectedSelectedIndices: null,
    },
    {
        comment: 'impossible to select utxos (maximumWeightInclusive too low)',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 229,
        changeWeight: 172,
        minimumAnonymityInclusive: 1,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(1_000_000),
                weight: 230,
                txid: '58bc4c1a77a2c0d228ad7433b2e74b9604634d7833c2c37b0d3887cbebd352e4',
                anonymity: 1.0,
                confirmed: true,
                registered: false,
            },
        ],
        expectedSelectedIndices: null,
    },
    {
        comment: 'prefer lower utxos count over order',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 4_000_000 - 172 - 42,
        changeWeight: 172,
        minimumAnonymityInclusive: 1,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(500_000),
                weight: 230,
                txid: '35ec0ea378e2c73ff3ebe940102dfe50fcb9d57fb62789fd8fb03c6d93b0d360',
                anonymity: 1.0,
                confirmed: true,
                registered: false,
            },
            {
                value: Value.fromNumber(500_000),
                weight: 230,
                txid: 'f69eb33627a44463e69cbf4c021fb008198ab47e766c574166845a5fd80cc3fc',
                anonymity: 1.0,
                confirmed: true,
                registered: false,
            },
            {
                value: Value.fromNumber(1_000_000),
                weight: 230,
                txid: '2d2697f27808517643b4d7c5343d633115de4ecaf21699fc16b162203f061cab',
                anonymity: 1.0,
                confirmed: true,
                registered: false,
            },
        ],
        expectedSelectedIndices: [2],
    },
    {
        comment: 'prefer higher minimum anonymity over order and lower utxos count',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 4_000_000 - 172 - 42,
        changeWeight: 172,
        minimumAnonymityInclusive: 1,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(1_000_000),
                weight: 230,
                txid: '9ef04585caca54d4e9887f582b755fe1287efd43d999fe5a3f663e909978026b',
                anonymity: 1.0,
                confirmed: true,
                registered: false,
            },
            {
                value: Value.fromNumber(500_000),
                weight: 230,
                txid: '5cf8ff1f798bcf602d63c4f3e4ffb26a477897a5fef4320ea23deb11b2514eb1',
                anonymity: 2.0,
                confirmed: true,
                registered: false,
            },
            {
                value: Value.fromNumber(500_000),
                weight: 230,
                txid: '1647650e4d8eeb056bac6f7ace3b74c68c285159bdeeb4eeded857ea3c65b328',
                anonymity: 2.0,
                confirmed: true,
                registered: false,
            },
        ],
        expectedSelectedIndices: [1, 2],
    },
    {
        comment:
            'prefer changeless transaction over order, lower utxos count and higher minimum anonymity',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 4_000_000 - 172 - 42,
        changeWeight: 172,
        minimumAnonymityInclusive: 1,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(1_001_001),
                weight: 230,
                txid: '7cdeaecd1013e389de2d8b8da8e6e0781e434f8b020b6e93ce5a1ee6d160f616',
                anonymity: 10.0,
                confirmed: true,
                registered: false,
            },
            {
                value: Value.fromNumber(500_500),
                weight: 230,
                txid: '7db80ca4db8a48cdc3bb985adec50d2c6e59161dab8bc9ae2894b766e734693f',
                anonymity: 1.0,
                confirmed: true,
                registered: false,
            },
            {
                value: Value.fromNumber(500_500),
                weight: 230,
                txid: 'd7fd77002a12a411b9385889dccbe6ea31940d54cd93cae8395d5ca4941f57ae',
                anonymity: 1.0,
                confirmed: true,
                registered: false,
            },
        ],
        expectedSelectedIndices: [1, 2],
    },
    {
        comment:
            'prefer confirmed utxos over order, lower utxos count, higher minimum anonymity and changeless transaction',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 4_000_000 - 172 - 42,
        changeWeight: 172,
        minimumAnonymityInclusive: 1,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(1_000_000),
                weight: 230,
                txid: '163e44291d0587f45d5de2466d2033cca2c688cb6f33ebb9b8b66e6f6903bbb0',
                anonymity: 10.0,
                confirmed: false,
                registered: true,
            },
            {
                value: Value.fromNumber(750_000),
                weight: 230,
                txid: '781caf5bcb7d58509468905cc93473efa8e9ed141485259853b855c73bdb2880',
                anonymity: 1.0,
                confirmed: true,
                registered: true,
            },
            {
                value: Value.fromNumber(750_000),
                weight: 230,
                txid: 'f5448c81715a2dc523b3591277f88ed772e84cfecce1cd831c0b634ba763dcbc',
                anonymity: 1.0,
                confirmed: true,
                registered: true,
            },
        ],
        expectedSelectedIndices: [1, 2],
    },
    {
        comment:
            'prefer not registered utxos over order, lower utxos count, higher minimum anonymity, changeless transaction and confirmed utxos',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 4_000_000 - 172 - 42,
        changeWeight: 172,
        minimumAnonymityInclusive: 1,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(1_000_000),
                weight: 230,
                txid: 'e88087a3c5c42d1d5550d7323b34f3f68f235665202985cca8adad9c54fcaf1f',
                anonymity: 10.0,
                confirmed: true,
                registered: true,
            },
            {
                value: Value.fromNumber(750_000),
                weight: 230,
                txid: 'fbb02fc4a5c987526974e238d7b351f4a10be835b5806e77d073f77c7f612028',
                anonymity: 1.0,
                confirmed: false,
                registered: false,
            },
            {
                value: Value.fromNumber(750_000),
                weight: 230,
                txid: '02718c3b37f90c41cd09bdae6dd8f1b04b9114d142ef469208c3bff4966dde74',
                anonymity: 1.0,
                confirmed: false,
                registered: false,
            },
        ],
        expectedSelectedIndices: [1, 2],
    },
    {
        comment:
            'prefer distinct txids over order, lower utxos count, higher minimum anonymity, changeless transaction, confirmed utxos and not registered utxos',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 4_000_000 - 172 - 42,
        changeWeight: 172,
        minimumAnonymityInclusive: 1,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(600_000),
                weight: 230,
                txid: '16fe9f20e09e681ade001b10fc78152b4ea8694026c10b467a60febb41ba7b06',
                anonymity: 10.0,
                confirmed: true,
                registered: false,
            },
            {
                value: Value.fromNumber(500_000),
                weight: 230,
                txid: '16fe9f20e09e681ade001b10fc78152b4ea8694026c10b467a60febb41ba7b06',
                anonymity: 10.0,
                confirmed: true,
                registered: false,
            },
            {
                value: Value.fromNumber(300_000),
                weight: 230,
                txid: '0f11552c70639a90c22ea10b169f81b4e98d76847226f361b50c25270a195974',
                anonymity: 1.0,
                confirmed: false,
                registered: true,
            },
            {
                value: Value.fromNumber(300_000),
                weight: 230,
                txid: '5c1134e5bb5e1eec90deba7295269593fcdcecf45c3b537510e95e38ac8dad80',
                anonymity: 1.0,
                confirmed: false,
                registered: true,
            },
        ],
        expectedSelectedIndices: [1, 2, 3],
    },
    {
        comment:
            'prefer minimum anonymity over order, lower utxos count, changeless transaction, confirmed utxos, not registered utxos and distinct txids',
        targetValue: Value.fromNumber(1_000_000),
        maximumDustInclusive: Value.fromNumber(1_000),
        minimumChangeInclusive: Value.fromNumber(5_000),
        maximumWeightInclusive: 4_000_000 - 172 - 42,
        changeWeight: 172,
        minimumAnonymityInclusive: 2,
        miningFee: 0,
        utxos: [
            {
                value: Value.fromNumber(1_000_000),
                weight: 230,
                txid: '605ecfa1b2ed1eb00666f6810842c3e4c06a0b78bd12ad2b4b396af1a2b25027',
                anonymity: 1,
                confirmed: true,
                registered: false,
            },
            {
                value: Value.fromNumber(500_000),
                weight: 230,
                txid: '250a8c86bded3d8f3c37f012a60a32255516a5ac246386c9910ed8f84cff6673',
                anonymity: 2.0,
                confirmed: false,
                registered: true,
            },
            {
                value: Value.fromNumber(600_000),
                weight: 230,
                txid: '250a8c86bded3d8f3c37f012a60a32255516a5ac246386c9910ed8f84cff6673',
                anonymity: 2.0,
                confirmed: false,
                registered: true,
            },
        ],
        expectedSelectedIndices: [1, 2],
    },
];
